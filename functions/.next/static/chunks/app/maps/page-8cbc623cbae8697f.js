(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>l,r:()=>d});var r=a(5155);a(2115);var n=a(9708),o=a(2085),s=a(9434);let d=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-[#DFB489] text-white rounded-md shadow-[inset_-2px_-2px_0px_#CB9B6A] hover:shadow-[inset_2px_2px_0px_#CB9B6A]",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline",close:"bg-background  rounded-md shadow-[inset_-2px_-2px_0px_#BCBBBB] hover:shadow-[inset_2px_2px_0px_#BCBBBB]",primary:"self-end px-4 py-1 bg-[#5F9EA0] text-white rounded-md shadow-[inset_-2px_-2px_0px_#347B7D] hover:shadow-[inset_2px_2px_0px_#347B7D]"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:a,size:o,asChild:l=!1,...i}=e,c=l?n.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,s.cn)(d({variant:a,size:o,className:t})),...i})}},1023:(e,t,a)=>{"use strict";a.d(t,{db:()=>d,hJ:()=>i,j2:()=>l,xv:()=>s});var r=a(3915),n=a(5317),o=a(6203);let s=(0,r.Wp)({apiKey:"AIzaSyBs9aS_Y6T0BqKTEq-3ydqb_Rbzm3dte_k",authDomain:"travel-diary-6f691.firebaseapp.com",projectId:"travel-diary-6f691",storageBucket:"travel-diary-6f691.firebasestorage.app",messagingSenderId:"985967366781",appId:"1:985967366781:web:90eced8a356a5a9ef4d714",measurementId:"G-ZBT29L44G2"}),d=(0,n.aU)(s),l=(0,o.xI)(s),i=new o.HF},2120:(e,t,a)=>{"use strict";a.d(t,{T:()=>d});var r=a(2115),n=a(5317),o=a(1023),s=a(5091);let d=e=>{let{uid:t}=e,[a,d]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0),{triggerAlert:c}=(0,s.M)(),u=(0,r.useCallback)(async()=>{try{if(!t)return void c("로그인이 필요합니다. 먼저 로그인해주세요!");i(!0);let e=(0,n.rJ)(o.db,"bookmarkData"),a=(0,n.P)(e,(0,n._M)("uid","==",t)),r=(await (0,n.GG)(a)).docs.map(e=>({_id:e.id,name:e.data().name,color:e.data().color}));d(r),i(!1)}catch(e){console.error("Firebase 북마크 불러오기 실패:",e)}},[t,c]);return(0,r.useEffect)(()=>{u()},[u]),{bookmarks:a,setBookmarks:d,fetchBookmarks:u,isLoading:l}}},2523:(e,t,a)=>{"use strict";a.d(t,{p:()=>o});var r=a(5155);a(2115);var n=a(9434);function o(e){let{className:t,type:a,...o}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,n.cn)("resize-none border-input focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content w-full rounded-md border bg-transparent px-2 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...o})}},2938:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>et});var r=a(5155),n=a(2115),o=a(2200),s=a(6681),d=a(5091),l=a(3874);let i=()=>{let[e,t]=(0,n.useState)(!1);return{isOpen:e,setIsOpen:t,onClickToggle:()=>{t(e=>!e)}}};var c=a(1154),u=a(9074),g=a(285),m=a(5933),p=a(2355),f=a(3052),x=a(6474),v=a(713),b=a(751),h=a(9434);function w(){let e=(0,m._)(["rtl:**:[.rdp-button_next>svg]:rotate-180"],["rtl:**:[.rdp-button\\_next>svg]:rotate-180"]);return w=function(){return e},e}function y(){let e=(0,m._)(["rtl:**:[.rdp-button_previous>svg]:rotate-180"],["rtl:**:[.rdp-button\\_previous>svg]:rotate-180"]);return y=function(){return e},e}function _(e){let{className:t,classNames:a,showOutsideDays:n=!0,captionLayout:o="label",buttonVariant:s="ghost",formatters:d,components:l,...i}=e,c=(0,v.a)();return(0,r.jsx)(b.h,{showOutsideDays:n,className:(0,h.cn)("bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw(w()),String.raw(y()),t),captionLayout:o,formatters:{formatMonthDropdown:e=>e.toLocaleString("default",{month:"short"}),...d},classNames:{root:(0,h.cn)("w-fit",c.root),months:(0,h.cn)("flex gap-4 flex-col md:flex-row relative",c.months),month:(0,h.cn)("flex flex-col w-full gap-4",c.month),nav:(0,h.cn)("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",c.nav),button_previous:(0,h.cn)((0,g.r)({variant:s}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",c.button_previous),button_next:(0,h.cn)((0,g.r)({variant:s}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",c.button_next),month_caption:(0,h.cn)("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",c.month_caption),dropdowns:(0,h.cn)("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",c.dropdowns),dropdown_root:(0,h.cn)("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",c.dropdown_root),dropdown:(0,h.cn)("absolute inset-0 opacity-0",c.dropdown),caption_label:(0,h.cn)("select-none font-medium","label"===o?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",c.caption_label),table:"w-full border-collapse",weekdays:(0,h.cn)("flex",c.weekdays),weekday:(0,h.cn)("text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",c.weekday),week:(0,h.cn)("flex w-full mt-2",c.week),week_number_header:(0,h.cn)("select-none w-(--cell-size)",c.week_number_header),week_number:(0,h.cn)("text-[0.8rem] select-none text-muted-foreground",c.week_number),day:(0,h.cn)("relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",c.day),range_start:(0,h.cn)("rounded-l-md bg-accent",c.range_start),range_middle:(0,h.cn)("rounded-none",c.range_middle),range_end:(0,h.cn)("rounded-r-md bg-accent",c.range_end),today:(0,h.cn)("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",c.today),outside:(0,h.cn)("text-muted-foreground aria-selected:text-muted-foreground",c.outside),disabled:(0,h.cn)("text-muted-foreground opacity-50",c.disabled),hidden:(0,h.cn)("invisible",c.hidden),...a},components:{Root:e=>{let{className:t,rootRef:a,...n}=e;return(0,r.jsx)("div",{"data-slot":"calendar",ref:a,className:(0,h.cn)(t),...n})},Chevron:e=>{let{className:t,orientation:a,...n}=e;return"left"===a?(0,r.jsx)(p.A,{className:(0,h.cn)("size-4",t),...n}):"right"===a?(0,r.jsx)(f.A,{className:(0,h.cn)("size-4",t),...n}):(0,r.jsx)(x.A,{className:(0,h.cn)("size-4",t),...n})},DayButton:j,WeekNumber:e=>{let{children:t,...a}=e;return(0,r.jsx)("td",{...a,children:(0,r.jsx)("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:t})})},...l},...i})}function j(e){let{className:t,day:a,modifiers:o,...s}=e,d=(0,v.a)(),l=n.useRef(null);return n.useEffect(()=>{var e;o.focused&&(null==(e=l.current)||e.focus())},[o.focused]),(0,r.jsx)(g.$,{ref:l,variant:"ghost",size:"icon","data-day":a.date.toLocaleDateString(),"data-selected-single":o.selected&&!o.range_start&&!o.range_end&&!o.range_middle,"data-range-start":o.range_start,"data-range-end":o.range_end,"data-range-middle":o.range_middle,className:(0,h.cn)("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",d.day,t),...s})}var k=a(547);function N(e){let{...t}=e;return(0,r.jsx)(k.bL,{"data-slot":"popover",...t})}function z(e){let{...t}=e;return(0,r.jsx)(k.l9,{"data-slot":"popover-trigger",...t})}function S(e){let{className:t,align:a="center",sideOffset:n=4,...o}=e;return(0,r.jsx)(k.ZL,{children:(0,r.jsx)(k.UC,{"data-slot":"popover-content",align:a,sideOffset:n,className:(0,h.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...o})})}function C(e){let{date:t,setDate:a,className:o}=e,[s,d]=n.useState(!1);return(0,r.jsx)("div",{className:"flex flex-col gap-3 ".concat(o),children:(0,r.jsxs)(N,{open:s,onOpenChange:d,children:[(0,r.jsx)(z,{asChild:!0,children:(0,r.jsxs)(g.$,{variant:"outline",id:"date",className:"!flex",children:[(0,r.jsx)(u.A,{size:24}),(0,r.jsx)("span",{children:t?t.toLocaleDateString():"기록할 날짜를 선택하세요."})]})}),(0,r.jsx)(S,{className:"w-auto overflow-hidden p-0 bg-white",align:"start",children:(0,r.jsx)(_,{mode:"single",selected:t,captionLayout:"dropdown",onSelect:e=>{a(e),d(!1)}})})]})})}var D=a(7426),B=a(2120),A=a(2523),L=a(4838),M=a(5317),I=a(1023);let E=[{color:"red"},{color:"orange"},{color:"yellow"},{color:"mandarin"},{color:"green"},{color:"blue"},{color:"skyblue"},{color:"pink"},{color:"purple"},{color:"black"}];function P(e){var t,a;let{bookmark:o,setBookmark:l,selectedMarker:c}=e,{uid:u}=(0,s.A)(),{triggerAlert:m}=(0,d.M)(),{isOpen:p,onClickToggle:f,setIsOpen:x}=i(),{bookmarks:v,setBookmarks:b}=(0,B.T)({uid:u}),[h,w]=(0,n.useState)({name:"",color:""}),y=async()=>{if(""===h.name.trim())return void m("여정의 이름을 입력해주세요!");if(""===h.color)return void m("북마크의 색상을 선택해주세요!");if(v.some(e=>e.name===h.name))return void m("이미 존재하는 여정 이름입니다. 다른 이름을 입력해주세요.");let e={_id:"",name:h.name,color:h.color};try{let t=(0,M.rJ)(I.db,"bookmarkData"),a=await (0,M.gS)(t,{uid:u,...e});await (0,M.mZ)(a,{_id:a.id});let r={_id:a.id,name:h.name,color:h.color};b(e=>[...e,r]),l(r),w({name:"",color:""}),x(!1)}catch(e){e instanceof Error&&console.error(e.message)}},_=async e=>{let t=(0,M.rJ)(I.db,"bookmarkData");await (0,M.kd)((0,M.H9)(t,e)),b(t=>t.filter(t=>t._id!==e)),o._id===e&&l({_id:"",name:"",color:""})},j=e=>{w(t=>({...t,color:t.color===e?"":e}))},k=(e,t,a)=>{l({_id:e,name:t,color:a})},N=(null==o?void 0:o.color)||(null==c||null==(t=c.bookmark)?void 0:t.color)||"default",z=(null==o?void 0:o.name)||(null==c||null==(a=c.bookmark)?void 0:a.name)||"여정을 선택하세요";return(0,r.jsxs)(L.rI,{children:[(0,r.jsx)(L.ty,{asChild:!0,children:(0,r.jsxs)(g.$,{variant:"outline",children:[(0,r.jsx)("img",{src:"/images/bookmark/icon_bookmarker_".concat(N,".png"),alt:"북마크 아이콘, 출처: figma",className:"w-5 inline-block mr-1"}),(0,r.jsx)("span",{className:"inline-block align-middle",children:z})]})}),(0,r.jsxs)(L.SQ,{children:[(0,r.jsx)(L.lp,{children:v.length>0?(0,r.jsx)("div",{className:"flex flex-col gap-1 max-h-40 overflow-y-auto",children:v.map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer",children:[(0,r.jsxs)(L._2,{onClick:()=>k(e._id,e.name,e.color),className:"flex items-center gap-1",children:[(0,r.jsx)("img",{src:"./images/bookmark/icon_bookmarker_".concat(e.color,".png"),alt:"북마크 아이콘, 출처: figma",className:"w-5"}),(0,r.jsx)("span",{children:e.name})]}),(0,r.jsx)("button",{onClick:t=>{t.stopPropagation(),_(e._id)},type:"button",className:"w-4 h-4 bg-[url(/images/icon_trash.png)] bg-contain bg-no-repeat","aria-label":"북마크 삭제"})]},e._id))}):(0,r.jsx)("div",{children:"여정을 만들어 보세요."})}),(0,r.jsx)(L.mB,{}),!p&&(0,r.jsxs)(L._2,{onClick:e=>{e.preventDefault(),f()},children:[(0,r.jsx)("img",{className:"w-5 inline-block",src:"./images/icon_plus.png",alt:"여정 추가 아이콘, 출처: figma"}),(0,r.jsx)("span",{children:"여정 추가하기"})]}),p&&(0,r.jsx)("div",{className:"mt-2 px-4 py-2 border rounded-md bg-gray-50",children:(0,r.jsxs)("div",{className:"flex flex-col gap-3 w-full py-1",children:[(0,r.jsx)(A.p,{className:"bg-white",placeholder:"여정의 이름을 입력해주세요.",value:h.name,onChange:e=>w(t=>({...t,name:e.target.value}))}),(0,r.jsx)("p",{className:"text-sm",children:"여정 색깔을 정해 주세요."}),(0,r.jsx)("ul",{className:"flex flex-wrap justify-center gap-1 w-full",children:E.map((e,t)=>{let{color:a}=e;return(0,r.jsx)("li",{onClick:()=>j(a),style:{backgroundColor:h.color===a?"#F1F5F9":"transparent",borderColor:h.color===a?"#ddd":"transparent"},className:"cursor-pointer border rounded-sm",children:(0,r.jsx)("img",{className:"w-8",src:"./images/bookmark/icon_bookmarker_".concat(a,".png"),alt:"북마크 아이콘, 출처: figma"})},t)})}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,r.jsx)(g.$,{variant:"close",onClick:()=>{w({name:"",color:""}),x(!1)},children:"닫기"}),(0,r.jsx)(g.$,{variant:"primary",type:"button",onClick:y,children:"추가"})]})]})})]})]})}function F(e){let{className:t,...a}=e;return(0,r.jsx)("textarea",{"data-slot":"textarea",rows:3,className:(0,h.cn)("resize-none border-input focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex   w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}var O=a(5452),J=a(4416);function G(e){let{...t}=e;return(0,r.jsx)(O.bL,{"data-slot":"dialog",...t})}function $(e){let{...t}=e;return(0,r.jsx)(O.ZL,{"data-slot":"dialog-portal",...t})}function T(e){let{...t}=e;return(0,r.jsx)(O.bm,{"data-slot":"dialog-close",...t})}function U(e){let{className:t,...a}=e;return(0,r.jsx)(O.hJ,{"data-slot":"dialog-overlay",className:(0,h.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function q(e){let{className:t,children:a,showCloseButton:n=!0,...o}=e;return(0,r.jsxs)($,{"data-slot":"dialog-portal",children:[(0,r.jsx)(U,{}),(0,r.jsxs)(O.UC,{"data-slot":"dialog-content",className:(0,h.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...o,children:[a,n&&(0,r.jsxs)(O.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,r.jsx)(J.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function H(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-header",className:(0,h.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function Z(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"dialog-footer",className:(0,h.cn)("flex  gap-2  justify-end",t),...a})}function R(e){let{className:t,...a}=e;return(0,r.jsx)(O.hE,{"data-slot":"dialog-title",className:(0,h.cn)("text-lg leading-none font-semibold",t),...a})}function V(e){let{className:t,...a}=e;return(0,r.jsx)(O.VY,{"data-slot":"dialog-description",className:(0,h.cn)("text-muted-foreground text-sm",t),...a})}function K(e){var t,a,o,l;let{isEdit:i,isOpen:c,setIsOpen:u,mapsAddress:m,selectedPosition:p,setSelectedPosition:f,setMapCenter:x,selectedMarker:v,createMarker:b,updateMarker:h,fetchMarkers:w}=e,{uid:y}=(0,s.A)(),[_,j]=(0,n.useState)(void 0),[k,N]=(0,n.useState)(""),{showAlert:z,alertValue:S,triggerAlert:B}=(0,d.M)(),[A,L]=(0,n.useState)({name:"",color:"",_id:""});(0,n.useEffect)(()=>{i&&v?(j(v.date),L(v.bookmark),N(v.content)):(j(void 0),L({name:"",color:"",_id:""}),N(""))},[i,v]);let E=async e=>{if(e.preventDefault(),!y)return void B("기록을 저장하려면 로그인이 필요합니다.");if(!(null==m?void 0:m.name))return void B("주소명이 없습니다.");if(!(null==m?void 0:m.formatted_address))return void B("상세주소가 없습니다.");if(!_)return void B("기록할 날짜를 선택해 주세요.");if(!k)return void B("기록할 내용을 입력해 주세요.");if(!p)return void B("마커를 선택해주세요.");let t={_id:"",name:null==m?void 0:m.name,address:null==m?void 0:m.formatted_address,latLng:p,uid:y,date:_,content:k,bookmark:A};try{await b({markerToSave:t}),x(p),f(null),u(!1),j(void 0),N(""),L({name:"",color:"",_id:""})}catch(e){if(e instanceof Error)return void console.error(e.message)}},O=async e=>{e.preventDefault();let t=null==v?void 0:v._id;if(!y)return void B("로그인이 필요합니다. 먼저 로그인해주세요!");if(!t)return void B("마커 ID가 없습니다");try{await h({markerId:t,date:_,content:k,bookmark:A}),u(!1),j(void 0),N(""),L({name:"",color:"",_id:""})}catch(e){e instanceof Error&&console.error(e.message)}},J=async e=>{try{await (0,M.kd)((0,M.H9)(I.db,"travelData",e)),console.log("ID ".concat(e," 삭제 성공")),w(),u(!1)}catch(t){console.error("ID ".concat(e," 삭제 실패"),t)}};return(0,r.jsxs)(G,{open:c,onOpenChange:u,children:[(0,r.jsx)(q,{className:"sm:w-140 lg:w-180 bg-[#F9F9F9]",children:(0,r.jsxs)("form",{onSubmit:i?O:E,children:[(0,r.jsxs)(H,{children:[(0,r.jsx)(R,{children:i?null!=(t=null==v?void 0:v.name)?t:"이름 없음":null!=(a=null==m?void 0:m.name)?a:"이름 없음"}),(0,r.jsx)(V,{children:i?null!=(o=null==v?void 0:v.name)?o:"주소 정보 없음":null!=(l=null==m?void 0:m.formatted_address)?l:"주소 정보 없음"})]}),(0,r.jsxs)("div",{className:"grid gap-3 mt-4",children:[(0,r.jsx)(P,{selectedMarker:v,bookmark:A,setBookmark:L}),(0,r.jsx)(C,{date:_,setDate:j,className:""}),(0,r.jsx)(F,{value:k,onChange:e=>N(e.target.value),className:"h-full mb-4 bg-white placeholder-gray",placeholder:"기록할 내용을 적어보세요."}),(0,r.jsxs)(Z,{children:[(0,r.jsx)(T,{asChild:!0,children:(0,r.jsx)(g.$,{variant:"close",children:"닫기"})}),(0,r.jsx)(g.$,{variant:"destructive",type:"button",onClick:()=>{var e;J(null!=(e=null==v?void 0:v._id)?e:"")},children:"삭제"}),(0,r.jsx)(g.$,{variant:"primary",type:"submit",children:i?"수정":"등록"})]})]})]})}),z&&(0,r.jsx)(D.A,{alertValue:S})]})}let Q={width:"100%",height:"100%"},Y={lat:40.749933,lng:-73.98633},W={mapTypeControl:!1,styles:[]},X=["places"];function ee(){let{uid:e}=(0,s.A)(),[t,a]=(0,n.useState)(!1),[u,g]=(0,n.useState)(Y),[m,p]=(0,n.useState)(),[f,x]=(0,n.useState)(Y),[v,b]=(0,n.useState)(null),h=(0,n.useRef)(null),w=(0,n.useRef)(null),[y,_]=(0,n.useState)(null),{markers:j,createMarker:k,updateMarker:N,fetchMarkers:z}=(0,l.n)({uid:e}),{isOpen:S,setIsOpen:C}=i(),{showAlert:B,alertValue:A,triggerAlert:L}=(0,d.M)(),M=e=>{C(!0),a(!0),_(e)},{isLoaded:I}=(0,o.KD)({googleMapsApiKey:"AIzaSyC665Og1UgqipFGBMhzyAH8A9wGnDUlQ6Y",libraries:X});return I?(0,r.jsxs)(o.u6,{mapContainerStyle:Q,center:u,zoom:13,options:W,onLoad:e=>{h.current=e},onClick:t=>{let r=t.placeId;if(!t.latLng||!h.current)return;let n=t.latLng.lat(),o=t.latLng.lng();if(r){if(t.stop(),!e)return void L("기록을 저장하려면 로그인이 필요합니다.");a(!1),C(!0),x({lat:n,lng:o}),_(null),new window.google.maps.places.PlacesService(h.current).getDetails({placeId:r},(e,t)=>{t===google.maps.places.PlacesServiceStatus.OK&&e?p(e):console.error("getDetails 실패:",t)})}},onBoundsChanged:()=>{if(h.current){var e;b(null!=(e=h.current.getBounds())?e:null)}},children:[j.filter(e=>{if(!v)return!0;let t=new window.google.maps.LatLng(e.latLng.lat,e.latLng.lng);return v.contains(t)}).map(e=>(0,r.jsx)(o.pH,{position:e.latLng,onClick:()=>M(e),icon:{url:"/images/icon_marker.png",scaledSize:new window.google.maps.Size(40,64),anchor:new window.google.maps.Point(20,74)}},e._id)),(0,r.jsx)(o.dj,{onLoad:e=>w.current=e,onPlacesChanged:()=>{var e,t;let a=null==(e=w.current)?void 0:e.getPlaces();if(!a||0===a.length)return;let r=null==(t=a[0].geometry)?void 0:t.location;r&&(x({lat:r.lat(),lng:r.lng()}),h.current&&r&&h.current.panTo(r))},children:(0,r.jsx)("input",{type:"text",placeholder:"검색",className:"box-border border border-transparent w-60 h-8 px-3 rounded shadow-md text-sm outline-none truncate absolute left-1/2 -ml-30 mt-20.5 z-10 bg-white"})}),(0,r.jsx)(K,{isEdit:t,isOpen:S,setIsOpen:C,mapsAddress:m,selectedPosition:f,setSelectedPosition:x,setMapCenter:g,selectedMarker:y,createMarker:k,updateMarker:N,fetchMarkers:z}),B&&(0,r.jsx)(D.A,{alertValue:A})]}):(0,r.jsx)(c.A,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 animate-spin text-muted-foreground","aria-label":"Loading"})}function et(){return(0,r.jsx)(ee,{})}},3874:(e,t,a)=>{"use strict";a.d(t,{n:()=>s});var r=a(2115),n=a(5317),o=a(1023);let s=e=>{let{uid:t}=e,[a,s]=(0,r.useState)([]),[d,l]=(0,r.useState)(!0),i=async e=>{let{markerToSave:t}=e,a=(0,n.rJ)(o.db,"travelData"),r=await (0,n.gS)(a,{...t});await (0,n.mZ)(r,{_id:r.id});let d={...t,_id:r.id};s(e=>[...e,d])},c=async e=>{let{markerId:t,date:a,content:r,bookmark:d}=e,l=(0,n.H9)(o.db,"travelData",t);await (0,n.mZ)(l,{date:a,content:r,bookmark:{name:d.name,color:d.color}}),s(e=>e.map(e=>e._id===t?{...e,date:null!=a?a:e.date,content:r,bookmark:{_id:d._id,name:d.name,color:d.color}}:e))},u=(0,r.useCallback)(async()=>{if(!t)return;l(!0);let e=(0,n.rJ)(o.db,"travelData"),a=(0,n.P)(e,(0,n._M)("uid","==",t),(0,n.My)("date","desc"));s((await (0,n.GG)(a)).docs.map(e=>({...e.data(),date:e.data().date.toDate()}))),l(!1)},[t]),[g,m]=(0,r.useState)(!0),p=(0,r.useRef)(null),f=(0,r.useCallback)(async()=>{if(!t)return;l(!0);let e=(0,n.aU)(o.xv),a=(0,n.rJ)(e,"travelData"),r=(0,n.P)(a,(0,n._M)("uid","==",t),(0,n.My)("date","desc"),(0,n.AB)(10));p.current&&(r=(0,n.P)(a,(0,n._M)("uid","==",t),(0,n.My)("date","desc"),(0,n.HM)(p.current),(0,n.AB)(10)));let d=await (0,n.GG)(r);if(d.empty)m(!1);else{let e=d.docs.map(e=>({...e.data(),date:e.data().date.toDate()}));s(t=>[...t,...e]),p.current=d.docs[d.docs.length-1],d.docs.length<10&&m(!1)}l(!1)},[t]);return(0,r.useEffect)(()=>{f()},[f]),{markers:a,createMarker:i,updateMarker:c,fetchMarkers:u,fetchMoreMarkers:f,isLoading:d,hasMore:g}}},4838:(e,t,a)=>{"use strict";a.d(t,{I:()=>i,SQ:()=>l,_2:()=>c,lp:()=>u,mB:()=>g,rI:()=>s,ty:()=>d});var r=a(5155);a(2115);var n=a(8578),o=a(9434);function s(e){let{...t}=e;return(0,r.jsx)(n.bL,{"data-slot":"dropdown-menu",...t})}function d(e){let{...t}=e;return(0,r.jsx)(n.l9,{"data-slot":"dropdown-menu-trigger",...t})}function l(e){let{className:t,sideOffset:a=4,...s}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsx)(n.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...s})})}function i(e){let{...t}=e;return(0,r.jsx)(n.YJ,{"data-slot":"dropdown-menu-group",...t})}function c(e){let{className:t,inset:a,variant:s="default",...d}=e;return(0,r.jsx)(n.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":s,className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...d})}function u(e){let{className:t,inset:a,...s}=e;return(0,r.jsx)(n.JU,{"data-slot":"dropdown-menu-label","data-inset":a,className:(0,o.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...s})}function g(e){let{className:t,...a}=e;return(0,r.jsx)(n.wv,{"data-slot":"dropdown-menu-separator",className:(0,o.cn)("bg-border -mx-1 my-1 h-px",t),...a})}},5091:(e,t,a)=>{"use strict";a.d(t,{M:()=>n});var r=a(2115);function n(){let[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)("");return{showAlert:e,alertValue:a,triggerAlert:(0,r.useCallback)(e=>{n(e),t(!0),setTimeout(()=>{t(!1)},2e3)},[])}}},6681:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(2115),n=a(6203),o=a(1023);let s=()=>{let[e,t]=(0,r.useState)(null),a=null==e?void 0:e.uid;return(0,r.useEffect)(()=>{let e=(0,n.hg)(o.j2,e=>{null!==e?t(e):t(null)});return()=>{e()}},[]),{user:e,uid:a,handleLogin:async()=>{try{await (0,n.df)(o.j2,o.hJ)}catch(e){console.error("로그인 실패:",e)}},handleLogout:async()=>{try{await o.j2.signOut()}catch(e){console.error("로그아웃 실패:",e)}}}}},7426:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var r=a(5155);a(2115);var n=a(2085),o=a(9434);let s=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,...n}=e;return(0,r.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,o.cn)(s({variant:a}),t),...n})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert-title",className:(0,o.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...a})}var i=a(3453),c=a(1934);function u(e){return(0,r.jsx)(c.P.div,{initial:{x:0,opacity:0},animate:{x:[0,-20,20,-20,20,0],scale:[1,.98,1.02,.98,1.02,1],opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},className:"absolute top-1/6 left-1/2 -translate-x-1/2 -translate-y-1/2 z-100 w-80",children:(0,r.jsxs)(d,{variant:"destructive",children:[(0,r.jsx)(i.A,{}),(0,r.jsx)(l,{children:e.alertValue})]})})}},9375:(e,t,a)=>{Promise.resolve().then(a.bind(a,2938))},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>o});var r=a(2596),n=a(9688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,965,84,277,31,645,414,8,153,441,684,358],()=>t(9375)),_N_E=e.O()}]);